<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>Pinnacle</h1>


<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/Input.html">Input</a></li>
  <li><a href="../modules/Builtin.html">Builtin</a></li>
  <li><a href="../modules/Builtin.html">Builtin</a></li>
  <li><a href="../modules/Builtin.html">Builtin</a></li>
  <li><a href="../modules/Builtin.html">Builtin</a></li>
  <li><a href="../modules/Builtin.html">Builtin</a></li>
  <li><a href="../modules/Builtin.html">Builtin</a></li>
  <li><a href="../modules/Layout.html">Layout</a></li>
  <li><strong>Output</strong></li>
  <li><a href="../modules/Pinnacle.html">Pinnacle</a></li>
  <li><a href="../modules/Process.html">Process</a></li>
  <li><a href="../modules/Render.html">Render</a></li>
  <li><a href="../modules/Tag.html">Tag</a></li>
  <li><a href="../modules/RectangleModule.html">RectangleModule</a></li>
  <li><a href="../modules/Util.html">Util</a></li>
  <li><a href="../modules/Window.html">Window</a></li>
</ul>
<h2>Classes</h2>
<ul class="nowrap">
  <li><a href="../classes/CyclingLayoutManager.html">CyclingLayoutManager</a></li>
  <li><a href="../classes/OutputHandle.html">OutputHandle</a></li>
  <li><a href="../classes/SignalHandle.html">SignalHandle</a></li>
  <li><a href="../classes/SignalHandles.html">SignalHandles</a></li>
  <li><a href="../classes/TagHandle.html">TagHandle</a></li>
  <li><a href="../classes/Rectangle.html">Rectangle</a></li>
  <li><a href="../classes/WindowHandle.html">WindowHandle</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>Output</code></h1>
<p>Output management.</p>
<p>An output is what you would call a monitor. It presents windows, your cursor, and other UI elements.</p>

<p>Outputs are uniquely identified by their name, a.k.a. the name of the connector they're plugged in to.</p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#output.get_all">output.get_all()</a></td>
	<td class="summary">Get all outputs.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#output.get_by_name">output.get_by_name(name)</a></td>
	<td class="summary">Get an output by its name (the connector it's plugged into).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#output.get_focused">output.get_focused()</a></td>
	<td class="summary">Get the currently focused output.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#output.connect_for_all">output.connect_for_all(callback)</a></td>
	<td class="summary">Connect a function to be run with all current and future outputs.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#output.setup">output.setup(setups)</a></td>
	<td class="summary">Declaratively setup outputs.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#output.setup_locs">output.setup_locs(update_locs_on, setup)</a></td>
	<td class="summary">Setup locations for outputs.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#output.connect_signal">output.connect_signal(signals)</a></td>
	<td class="summary">Connect to an output signal.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Functions"></a>Functions</h2>

    <dl class="function">
    <dt>
    <a name = "output.get_all"></a>
    <strong>output.get_all()</strong>
    </dt>
    <dd>
    Get all outputs.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../classes/OutputHandle.html#">OutputHandle[]</a></span>



    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> outputs = Output.<span class="function-name">get_all</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "output.get_by_name"></a>
    <strong>output.get_by_name(name)</strong>
    </dt>
    <dd>
    Get an output by its name (the connector it's plugged into).


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">name</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.4">string</a></span>
         The name of the connector the output is connected to
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../classes/OutputHandle.html#">OutputHandle</a> or <span class="type">nil</span></span>



    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> output = Output.<span class="function-name">get_by_name</span>(<span class="string">"eDP-1"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "output.get_focused"></a>
    <strong>output.get_focused()</strong>
    </dt>
    <dd>
    Get the currently focused output. </p>

<p>This is currently defined as the most recent one that has had pointer motion.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../classes/OutputHandle.html#">OutputHandle</a> or <span class="type">nil</span></span>



    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> output = Output.<span class="function-name">get_focused</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "output.connect_for_all"></a>
    <strong>output.connect_for_all(callback)</strong>
    </dt>
    <dd>
    Connect a function to be run with all current and future outputs. </p>

<p>This method does two things:
1. Immediately runs <code>callback</code> with all currently connected outputs.
2. Calls <code>callback</code> whenever a new output is plugged in.</p>

<p>This will <em>not</em> run <code>callback</code> with an output that has been unplugged and replugged
to prevent duplicate setup. Instead, the compositor keeps track of the tags and other
state associated with that output and restores it when replugged.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">function</span></span>



        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"> <span class="comment">-- Add tags "1" through "5" to all outputs
</span>Output.<span class="function-name">connect_for_all</span>(<span class="keyword">function</span>(output)
    <span class="keyword">local</span> tags = Tag.<span class="function-name">add</span>(output, <span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>, <span class="string">"4"</span>, <span class="string">"5"</span>)
    tags[<span class="number">1</span>]:<span class="function-name">toggle_active</span>()
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "output.setup"></a>
    <strong>output.setup(setups)</strong>
    </dt>
    <dd>
    Declaratively setup outputs. </p>

<p><a href="../modules/Output.html#output.setup">Output.setup</a> allows you to specify output properties that will be applied immediately and
on output connection. These include mode, scale, tags, and more.</p>

<p>Setups will be applied from top to bottom.</p>

<p><code>setups</code> is an array of <code>OutputSetup</code> tables.
The table entry at [1] in an <code>OutputSetup</code> table should be either a string or a function
that takes in an <a href="../classes/OutputHandle.html#">OutputHandle</a> and returns a boolean. Strings will match output names directly,
while the function matches outputs based on custom logic. You can specify keys such as
<code>tag_names</code>, <code>scale</code>, and others to customize output properties.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">setups</span>
            <span class="types"><span class="type">OutputSetup[]</span></span>



        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">Output.<span class="function-name">setup</span>({
    <span class="comment">-- Give all outputs tags 1 through 5
</span>    {
        <span class="keyword">function</span>(_) <span class="keyword">return</span> <span class="keyword">true</span> <span class="keyword">end</span>,
        tag_names = { <span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>, <span class="string">"4"</span>, <span class="string">"5"</span> },
    }
    <span class="comment">-- Give outputs with a preferred mode of 4K a scale of 2.0
</span>    {
        <span class="keyword">function</span>(op)
            <span class="keyword">return</span> op:<span class="function-name">preferred_mode</span>().pixel_width == <span class="number">2160</span>
        <span class="keyword">end</span>,
        scale = <span class="number">2.0</span>,
    },
    <span class="comment">-- Additionally give eDP-1 tags 6 and 7
</span>    {
        <span class="string">"eDP-1"</span>,
        tag_names = { <span class="string">"6"</span>, <span class="string">"7"</span> },
    },
})</pre>
    </ul>

</dd>
    <dt>
    <a name = "output.setup_locs"></a>
    <strong>output.setup_locs(update_locs_on, setup)</strong>
    </dt>
    <dd>
    Setup locations for outputs. </p>

<p>This function lets you declare positions for outputs, either as a specific point in the global
space or relative to another output.</p>

<p><code>update_locs_on</code> specifies when output positions should be recomputed. It can be <code>&quot;all&quot;</code>, signaling you
want positions to update on all of output connect, disconnect, and resize, or it can be a table
containing <code>&quot;connect&quot;</code>, <code>&quot;disconnect&quot;</code>, and/or <code>&quot;resize&quot;</code>.</p>

<p><a href="../modules/Output.html#output.setup">setup</a> is an array of tables of the form <code>{ [1]: string, loc: OutputLoc }</code>, where <code>OutputLoc</code> is either
the table <code>{ x: integer, y: integer }</code>, <code>{ [1]: string, [2]: Alignment }</code>, or an array of the latter table.
See the examples for information.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">update_locs_on</span>
            <span class="types"><span class="type">(UpdateLocsOn)[]</span> or <span class="type">"all"</span></span>



        </li>
        <li><span class="parameter">setup</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.6">table</a></span>



        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">               <span class="comment">-- vvvvv Relayout on output connect, disconnect, and resize
</span>Output.<span class="function-name">setup_locs</span>(<span class="string">"all"</span>, {
    <span class="comment">-- Anchor eDP-1 to (0, 0) so we can place other outputs relative to it
</span>    { <span class="string">"eDP-1"</span>, loc = { x = <span class="number">0</span>, y = <span class="number">0</span> } },
    <span class="comment">-- Place HDMI-A-1 below it centered
</span>    { <span class="string">"HDMI-A-1"</span>, loc = { <span class="string">"eDP-1"</span>, <span class="string">"bottom_align_center"</span> } },
    <span class="comment">-- Place HDMI-A-2 below HDMI-A-1.
</span>    <span class="comment">-- Additionally, if HDMI-A-1 isn't connected, fallback to placing
</span>    <span class="comment">-- it below eDP-1 instead.
</span>    {
        <span class="string">"HDMI-A-2"</span>,
        loc = {
            { <span class="string">"HDMI-A-1"</span>, <span class="string">"bottom_align_center"</span> },
            { <span class="string">"eDP-1"</span>, <span class="string">"bottom_align_center"</span> },
        },
    },
})

 <span class="comment">-- Only relayout on output connect and resize
</span>Output.<span class="function-name">setup_locs</span>({ <span class="string">"connect"</span>, <span class="string">"resize"</span> }, { ... })</pre>
    </ul>

</dd>
    <dt>
    <a name = "output.connect_signal"></a>
    <strong>output.connect_signal(signals)</strong>
    </dt>
    <dd>
    Connect to an output signal. </p>

<p>The compositor sends signals about various events. Use this function to run a callback when
some output signal occurs.</p>

<p>This function returns a table of signal handles with each handle stored at the same key used
to connect to the signal. See <a href="../classes/SignalHandles.html#">SignalHandles</a> for more information.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">signals</span>
            <span class="types"><span class="type">OutputSignal</span></span>
         The signal you want to connect to
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../classes/SignalHandles.html#">SignalHandles</a></span>
        Handles to every signal you connected to wrapped in a table, with keys being the same as the connected signal.
    </ol>


    <h3>See also:</h3>
    <ul>
         <a href="../classes/SignalHandles.html#signalhandles:disconnect_all">SignalHandles.disconnect_all</a>
    </ul>

    <h3>Usage:</h3>
    <ul>
        <pre class="example">Output.<span class="function-name">connect_signal</span>({
    connect = <span class="keyword">function</span>(output)
        <span class="global">print</span>(<span class="string">"New output connected:"</span>, output.name)
    <span class="keyword">end</span>
})</pre>
    </ul>

</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/lunarmodules/LDoc">LDoc 1.5.0</a></i>
<i style="float:right;">Last updated 2024-04-17 00:26:58 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
